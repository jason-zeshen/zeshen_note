关联：
- [进程地址空间](/计算机学习/linux系统编程/进程地址空间) 
- apue 7.6节
- [(深入理解计算机系统) bss段，data段、text段、堆(heap)和栈(stack)](https://www.cnblogs.com/yanghong-hnu/p/4705755.html)


## 内存分区
### 运行前后
- 运行前
	- 代码区(text)：共享的、只读的
	- 数据区：
		- 已初始化(data)的全局变量、静态变量、常量
		- 未初始化(bss)的全局变量、静态变量、常量
- 运行后
	- 程序在加载到内存前，代码区(text)和全局区(data和bss)的大小就是固定的，程序运行期间不能改变。然后，运行可执行程序，操作系统把物理硬盘程序load(加载)到内存，除了根据可执行程序的信息分出代码区（text）、数据区（data）和未初始化数据区（bss）之外，还额外增加了栈区、堆区。
	- 栈区(stack)：
		-  存放函数的参数值、返回值、局部变量等。
		- 属于先进后出的数据结构
		- 由编译器管理数据开辟和释放
		- 变量的生命周期在该函数结束后自动释放掉
	- 堆区(heap)：
		- 容量远远大于栈
		- 没有先进后出这样的数据结构
		- 由程序员管理开辟和管理释放
			- malloc、free
			- 记住手动开辟的要手动释放
### 各个分区
- 栈区：不要返回局部变量的地址，因为局部变量在函数执行之后就释放了，我们没有权限取操作释放后的内存。
- 堆区：
	- 在堆区开辟的数据，记得手动开辟，手动释放。
	- 如果在主调函数中没有给指针分配内存，那么被调函数中需要利用高级指针给主调函数中指针分配内存。
- 数据区(data & bss)：
	- 放入是静态变量、全局变量、常量
	- static 和 extern 区别：
		- static 静态变量：编译阶段分配内存，只能在当前文件内使用，只初始化一次。
		- extern 全局变量，C语言下默认的全局变量前都隐藏的加了该关键字。
	- const修饰的变量：
		- 是伪常量。
		- 修饰全局变量时：因为放在常量区，所以无法直接或间接修改。
		- 修饰局部变量时：存放在栈区，可以间接修改。
	- 字符串常量：
		- 不同的编译器可能有不同的处理方式。
		- ANSI没有指定出标准
		- 有些编译器可以修改字符串常量，有些不可以


https://blog.csdn.net/PengPengBlog/article/details/72191022?utm_source=blogxgwz8 
```c
/* 这是一个前辈写的，非常详细 */
int a = 0; 全局初始化区  
char *p1; 全局未初始化区  
main()  
{  
int b; 栈  
char s[] = "abc"; 栈  
char *p2; 栈  
char *p3 = "123456"; 123456\0在常量区，p3在栈上。  
static int c =0； 全局（静态）初始化区  
p1 = (char *)malloc(10);  
p2 = (char *)malloc(20);  
分配得来得10和20字节的区域就在堆区。  
strcpy(p1, "123456"); 123456\0放在常量区，编译器可能会将它与p3所指向的"123456"
优化成一个地方。  
} 
```