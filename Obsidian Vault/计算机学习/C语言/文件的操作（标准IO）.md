## 目录
* [文件相关概念](#文件相关概念)
* [系统调用IO和标准IO](#系统调用IO和标准IO)
* [标准输入/输出函数家族](#标准输入/输出函数家族)
* [文件打开和关闭](#文件打开和关闭)
* 

------

## 文件相关概念

- 文件的概念：
	- 一个文件通常就是磁盘上一段命名的存储区。
- 流的概念：
	- 流是一个动态的概念，流是对输入输出源的一种抽象，也是对传输信息的一种抽象。
	- C语言中，I/O操作可以简单地看作是从程序移进或移出字节，这种搬运的过程便称为流(stream)。
	- 文本流：也就是我们常说的以文本模式读取文件。文本流的有些特性在不同的系统中可能不同：
		1. 文本行的最大长度。标准规定至少允许254个字符。
		2. 文本行的结束方式。windws以"\\r\\n"结尾，linux以"\\n"结尾
	- 二进制流：区别于文本流。完全根据程序编写它们的形式写入到文件中。它们并未做任何改变。
	- 我们程序中，经常看到的文本方式打开文件和二进制方式打开文件仅仅体现在换行符的处理上。


##  系统调用IO和标准IO

参考文章：
> [文件IO、标准IO的区别及其效率](https://blog.csdn.net/llzhang_fly/article/details/120118193)
> [系统调用IO和标准IO](https://www.cnblogs.com/songhe364826110/p/11546076.html#%E6%A6%82%E8%BF%B0)

- 系统IO：Unix/Linux下的系统文件IO，即文件访问机制不经过操作系统内核的缓存，数据直接在磁盘和应用程序地址空间进行传输。
	- 常用的系统调用IO函数有5个：open、close、read、write、ioctl，此外还有个非系统调用IO函数lseek，系统调用IO都是不带缓冲的IO。
- 标准IO：带缓存的IO，又称为标准IO(C标准库中提供了标准IO库，即stdio)，它实现了跨平台的用户缓存解决方案。
	- stdio.h头文件中提供的IO接口
	- 常用函数：fopen,fclose,fwrite,fread 等。。。
- 主要区别：
	- 缓冲区：标准I/O函数接口在对文件进行操作时，首先操作缓存区，等待缓存区满足一定的条件时，然后再去执行系统调用，真正实现对文件的操作。        而文件I/O不操作任何缓存区，直接执行系统调用。
	- 系统开销：使用标准I/O可以减少系统调用的次数，提高系统效率。例如，将数据写入文件中，每次写入一个字符。采用文件I/O的函数接口，每调用一次函数写入字符就会产生一次系统调用。        而执行系统调用时，Linux必须从用户态切换到内核态，处理相应的请求，然后再返回到用户态，如果频繁地执行系统调用会增加系统的开销。
	- 执行效率：采用标准I/O的函数接口，每调用一次函数写入字符，并不着急将字符写入文件，而是放到缓存区保存，之后每一次写入字符都放到缓存区保存。直到缓存区满足刷新的条件（如写满）时，再一并将缓存区中的数据写入文件，执行一次系统调用完成此过程，这样便很大程度地减少了系统的调用次数，提高了执行效率。

## 本笔记主要介绍标准io

## 标准输入/输出函数家族
| 家族名 | 目的 | 可用于所有流 | 只用于stdin和stdout |
| ------- | ---- | ------------- | ------------ |
| getchar | 字符输入 | fgetc、getc | getchar |
| putchar	| 字符输出 | fputc、putc | putchar |
| gets | 文本行输入 | fgets | gets |
| puts | 文本行输出 | fputs | puts |
| scanf | 格式化输入 | fscanf | scanf |
| printf | 格式化输出 |	fprintf |	printf |


## 文件打开和关闭
- 文件打开：fopen()
	FILE * fopen(const char * filename, const char * mode);
	功能：打开文件
	参数：
		filename：需要打开的文件名，根据需要加上路径
		mode：打开文件的权限设置
	返回值：
		成功：文件指针
		失败：NULL
- 文件关闭：fclose()
	- fclose() 调用原因：
		1. 对打开的文件进行写入时，若文件缓冲区的空间未被写入的内容填满，这些内容不会写到打开的文件中。只有对打开的文件进行关闭操作时，停留在文件缓冲区的内容才能写到该文件中去，从而使文件完整。
		2. 一旦关闭了文件，该文件对应的FILE结构将被释放，从而使关闭的文件得到保护，因为这时对该文件的存取操作将不会进行。文件的关闭也意味着释放了该文件的缓冲区。


## 文件读写函数
- 按照字符读写文件：fgetc(), fputc()
- 按照行读写文件：fputs(), fgets()
- 按照块读写文件：fread(), fwirte()
	- 一般用于结构体
- 按照格式化读写文件：fprintf(), fscanf()
- 按照随机位置读写文件：fseek(), ftell(), rewind()	
- EOF：end of file
- feof（FILE \*fp）: 只能用于文本流
